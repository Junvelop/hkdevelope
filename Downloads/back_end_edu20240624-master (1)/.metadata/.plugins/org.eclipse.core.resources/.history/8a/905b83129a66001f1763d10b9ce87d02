<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>js24_ajax</title>
<script type = "text/javascript">
 function ajaxGet(){
	 //비동기처리 지원 객체 생성
	 var xhr = new XMLHttPRequest();
	 
	 //get방식에 경우는 주로 조회용으로 요청 : 검색어 --> 해당내용 조회
	 var parmas = "num=1&id=hk";
	 
	 xhr.open("GET","data.json?"+params,true);
	 
	 //요청이 완료된 후에 처리할 작업을 정의
	 // - 요청 결과에 대한 처리 변화를 지정한다.
	 xhr.onreadystatechange = function(){
		 // readyState가 4이면 완료, statur가 200이면 성공을 의미
		 if(xhr.readyState == 4 && xhr.status === 200){
			 //xhr.responseText : 응답한 데이터를 텍스트 반환 , JSON.parse():
			// Json형태의 문자열 -->js 객체로 변환 : 받을 때 사용
			// JSon.stringify(): js 객체 --> 제이슨 형태의 문자열 변환 : 보낼 때 사용
			 var data = xhr.responseText; // 텍스트 데이터 
			 	 data = JSON.parse(); //문자열을 제이슨으로 변환해야됨 JS객체 변환
			 console.log(data.id + ":"+ data.name); // {id.hk, name:한경}객체
			 //rendering을 하자 : csr 개념 --> SPA 구현
			 var resultView = document.querySelector("#result");
			 
			 resultView.innerHTML = "<p>"+data.id+"</p>" + "<p>" + data.name + "</p>" + "<p>" + data.addr +"</P>";
			 
			 
		 }
	 }
	 //요청을 서버로 전송하자 
	 xhr.send();
 }

 	function ajaxPost(){
 		
 		 //비동기처리 지원 객체 생성
 		 var xhr = new XMLHttPRequest();
 		 var params = JSON.stringify({num:1,id:"hk"});
 		 
 		 //get방식에 경우는 주로 조회용으로 요청 : 검색어 --> 해당내용 조회
 	//	 var parmas = "num=1&id=hk";
 		 
 		 //전송할 데이터는 json 형식의 텍스트로 변환
 		 xhr.open("POST","data.json", true);
 		 xhr.setRequestHeader("Content-type", "application/json; charset=UTF-8"); // 서버로 보낼 때 필요한 정보를 헤더에 담아서 보낸다. 
 		 
 		 //요청이 완료된 후에 처리할 작업을 정의
 		 // - 요청 결과에 대한 처리 변화를 지정한다.
 		 xhr.onreadystatechange = function(){
 			 // readyState가 4이면 완료, statur가 200이면 성공을 의미
 			 if(xhr.readyState == 4 && xhr.status === 200){
 				 //xhr.responseText : 응답한 데이터를 텍스트 반환 , JSON.parse():
 				// Json형태의 문자열 -->js 객체로 변환 : 받을 때 사용
 				// JSon.stringify(): js 객체 --> 제이슨 형태의 문자열 변환 : 보낼 때 사용
 				 var data = xhr.responseText; // 텍스트 데이터 
 				 	 data = JSON.parse(); //문자열을 제이슨으로 변환해야됨 JS객체 변환
 				 console.log(data.id + ":"+ data.name); // {id.hk, name:한경}객체
 				 //rendering을 하자 : csr 개념 --> SPA 구현
 				 var resultView = document.querySelector("#result");
 				 
 				 resultView.innerHTML = "<p>"+data.id+"</p>" + "<p>" + data.name + "</p>" + "<p>" + data.addr +"</P>";
 				 
 				 
 			 }
 		 }
 		 //요청을 서버로 전송하자 
 		 xhr.send(params);
 		
 	}
</script>

<button onclick="ajaxGet()">GET방식</button>
<button onclick="ajaxPost()">POST방식</button>
<div id ="result"></div>


</body>
</html>