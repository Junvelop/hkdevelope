<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
<script type="text/javascript" 
		src="https://code.jquery.com/jquery-latest.js"></script>
<script type = "text/javascript">
/*
 * 	ajax()를 사용하여 비동기 구현
 	-기본속성
 		-url : 요청할 페이지 주소
 		-method : 요청방식 (get/post)
 		-data: 요청할 페이지에 전송할 데이터
 		-dataType: 응답받을 데이터의 타입(json/xml/text 등등...)
 		-async : 자바스크립트 코드를 비동기도 실행할지 여부 (true/false)
 		-success : 서버통신이 성공했다면 정의된 함수를 실행시킴
 		-error : 서버통신이 실패했을 때 정의된 함수를 실행시킴
 */

	$(function(){
		$("#emp_search").click(function(){
			
			//  다른 실행코드
			$.ajax({
					url:"emplist.xml",
					method:"get",
					async:false, // $.ajax() 메서드를 비동기로 실행할지의 여부, 만약 위에 다른 실행코드가 존재하고 true로 해놓으면 위가 먼저 실행될지 아약스가 먼저 실행될지 몰라
					data:{"id":"hk","name":"hankyung"},
					dataType:"xml",
					success:function(data){ //파라미터는 응답데이터를 받는다.
						//받은 데이터로 화면에 어떻게 렌더링할지 코드 작성 부분
		//				alert(data.querySelectorAll("EMPLOYEE_ID")[0].textContent);
						alert($(data).find("LAST_NAME").eq(0).text());
						var emplist = $(data);
						
						for (var i = 0; i < emplist.find("ROW").length; i++) {
							for (var j = 0; j < emplist.eq(i).children().length; j++) {
								$("div").append
								("<p>" + emplist.eq(i).children().eq(j).text() + "</p>");
								
							}
							
						}
						
						emplist.find("ROW")
					},
					error:function(request,error){
						alert("통신실패 : " + request.status + "," + error);
					}
					
					
			}); // 달러가 제이쿼리를 나타내는 특수문자이기 때문에 이렇게 사용함 == jquery.ajax();
		});
	});
</script>
</head>
<body>
<h1>사원정보조회하기</h1>
<button type = "button" id  = "emp_search">조회</button>
<div></div>

</body>
</html>